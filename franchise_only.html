<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title>Businesses of Ancaster</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Web mapping application for the local businesses of Ancaster, Ontario">
<meta name="keywords" content="Ancaster, Local, Business, Franchise, Ontario, GIS, Analysis, Map, Web Mapping, Leaflet, Javascript, GeoJSON">
<meta name="author" content="Kevin Fitzgerald">
<link rel="stylesheet" href="css/leaflet.css"/>
<link rel="stylesheet" href="css/custom-markercluster.css"/>
<link rel="stylesheet" href="css/styledLayerControl.css" />
<link rel="stylesheet" href="css/leaflet-search.css" />
<link rel="stylesheet" href="css/mobile.css" />
<link rel="stylesheet" href="css/leaflet-search.mobile.src.css" />
<link rel="stylesheet" href="css/leaflet-condensed-attribution.css" />
<script src="js/leaflet-src.js"></script>
<script src="js/leaflet-markercluster.js"></script>
<script src="js/styledLayerControl.js"></script>
<script src="js/leaflet-search.js"></script>
<script src="js/leaflet-condensed-attribution.js"></script>
<style>
html, body {
    padding: 0;
    margin: 0;
}
/*
#mapcontainer {
	border: 
	width: 100vw;
	height: 100vh;
}*/
#map {
	height: 100vh;
	width: 100vw;
	margin-top:-18px;
}
#logo {
	width: 60px;
	height: 60px;
}
.leaflet-div-icon {
	opacity: 0;
	}
.leaflet-marker-icon {
	color: #fff;
	font-size: 16px;
	line-height: 16px;	
	text-align: center;
	vertical-align: middle;
	box-shadow: none;
}
.search-tip {
	white-space: nowrap;
}
.search-tip b {
	display: inline-block;
	clear: left;
	float: right;
	padding: 0 4px;
	margin-left: 4px;
}
.dropbtn {
	background-image: url('https://dl.dropbox.com/s/5zqd91092k14evw/filter.png?dl=0');
  	background-position: center;
  	background-repeat: no-repeat;
  	background-size: 70% 70%;
	background-color: rgba(255, 255, 255, 0.8);
	box-shadow: 0 1px 7px rgba(0,0,0,0.65);
    border: 2px solid #1978cf;
	border-radius:6px;
    color: black;
    padding: 16px;
    font-size: 12px;
    cursor: pointer;
    position: absolute;
    z-index: 4;
    outline: none;
}
.dropdown {
	background-color: rgba(255, 255, 255, 0.6);
	box-shadow: 0 1px 7px rgba(0,0,0,0.65);
    border: 2px solid #1978cf;
	border-radius:6px;
    position: relative;
    top:110px;
    left:6px;
    z-index: 5;
    display: inline-block;
}
.dropdown-content {
	background-color: rgba(255, 255, 255, 0.6);
	box-shadow: 0 1px 7px rgba(0,0,0,0.65);
    border: 2px solid #1978cf;
	border-radius:6px;
	z-index: 5;
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
}

.dropdown-content a {
	border-radius:6px;
    color: black;
    font-size: 12px;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}
#shown {
	background-image: url('https://dl.dropbox.com/s/sm6t9uxjaow58a0/checkmark.png?dl=0');
  	background-position: right;
  	background-repeat: no-repeat;
  	background-size: 20% 70%;
  	background-color: rgba(255, 255, 255, 1);
    color: black;
    font-size: 12px;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}
#hidden {
    color: black;
    font-size: 12px;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

.dropdown-content a:hover {
	background-color: #f1f1f1
}

.show {
	display:block;
}
/*
.dropdown:hover .dropdown-content {
    display: block;
}
*/
.dropdown:hover .dropbtn {
    background-color: rgba(255, 255, 255, 1);
	box-shadow: 0 1px 7px rgba(0,0,0,0.65);
    border: 2px solid #1978cf;
}
.leaflet-container .leaflet-control-attribution {
  border-radius: 26px;
}
.leaflet-control-attribution .attributes-body {
  height: 36px;
  line-height: 36px;
}
.leaflet-control-attribution .attributes-emblem {
  height: 36px;
  width: 36px;
}
.emblem-wrap, .emblem-wrap img {
  height: 20px;
}
</style>
</head>
<body>
<div id="mapcontainer">
         <div class="dropdown">
	  <button id = "myBtn" class="dropbtn"></button>
	  <div id="dropdown-content" class="dropdown-content">
	    <a href="index.html" id="hidden">All Businesses</a>
	    <a id="shown">Franchise Only</a>
	    <a href="local_only.html" id="hidden">Local Only</a>
	  </div>
	</div>
     <div id="map"> </div>
</div>
<script src="geojson/franchise/ArtMusic_Geojson.js"></script>
<script src="geojson/franchise/Theatre_Geojson.js"></script>

<script src="geojson/franchise/Education_Geojson.js"></script>
<script src="geojson/franchise/Church_Geojson.js"></script>
<script src="geojson/franchise/Municipal_Geojson.js"></script>

<script src="geojson/franchise/Fitness_Geojson.js"></script>
<script src="geojson/franchise/Sport_Geojson.js"></script>

<script src="geojson/franchise/Grocery_Geojson.js"></script>
<script src="geojson/franchise/Rest_Geojson.js"></script>
<script src="geojson/franchise/Special_Rest_Geojson.js"></script>

<script src="geojson/franchise/ChiroPhy_Geojson.js"></script>
<script src="geojson/franchise/DentalOptical_Geojson.js"></script>
<script src="geojson/franchise/PharmPhys_Geojson.js"></script>
<script src="geojson/franchise/SpecHeal_Geojson.js"></script>
<script src="geojson/franchise/Vet_Geojson.js"></script>

<script src="geojson/franchise/Advise_Geojson.js"></script>
<script src="geojson/franchise/FinanceLaw_Geojson.js"></script>
<script src="geojson/franchise/EstateInsure_Geojson.js"></script>

<script src="geojson/franchise/Aes_Geojson.js"></script>
<script src="geojson/franchise/Clothing_Geojson.js"></script>
<script src="geojson/franchise/Design_Geojson.js"></script>
<script src="geojson/franchise/Retail_Geojson.js"></script>

<script src="geojson/franchise/Auto_Geojson.js"></script>
<script src="geojson/franchise/General_Geojson.js"></script>
<script src="geojson/franchise/LandMain_Geojson.js"></script>
<script src="geojson/franchise/Manu_Geojson.js"></script>
<script src="geojson/franchise/Tech_Geojson.js"></script>
<script src="geojson/franchise/Utility_Geojson.js"></script>
<script>
// Get the filter button, and when the user clicks on it, execute open filter function
document.getElementById("myBtn").onclick = function() {openfilter()};
// open filter function toggles between adding/removing the show class, which is used to hide/show the dropdown content 
function openfilter() {
    document.getElementById("dropdown-content").classList.toggle("show");
}

// Get the dropdown content, and when the user clicks on it, execute close filter function
document.getElementById("dropdown-content").onclick = function() {closefilter()};
// close filter function toggles between adding/removing the show class, which is used to hide/show the dropdown content 
function closefilter() {
    document.getElementById("dropdown-content").classList.toggle("show");
}

//function and loop used to close the filter when the user clicks outside of it -- needed to enhance user experience
mapwindow = document.getElementById("map");
mapwindow.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>
<script>
// All Icons Provided By: Maps Icons Collection - https://mapicons.mapsmarker.com

//Symbol for Aesthetic Stores
var aesIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/dsbb61mpbqxufxs/spa.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Rinks and Arenas
var arenaIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/qzi1bem8vc1mkys/arena.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Art Stores
var artIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/i7z3jvqojt4x1f1/museum_art.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for bakeries
var bakeIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/xnjud8esx45h976/sweetbakery.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for banks
var bankIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/rez71ads2xamj9y/bank.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Pubs and The Beer Store
var beerIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/44545c03w94m2dv/beergarden.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});	

//Symbol for Cafes and Coffee Shops
var cafeIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/bf4o8u9ujlkhkkm/coffee.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Car Repair Services
var carrepairIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/hevhpwi1n1fb1g0/carrepair.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for chiropractic services
var chiroIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/kfe66ytqkucwy6u/chiropractor.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Churches
var churchIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/iii9uszbf9h0cp0/church-2.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Clothing Stores
var clothingIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/svzmyqzaryfw6t8/clothers_female.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for computer and software technology services
var compIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/c6jf50t2uz3dsow/computers.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for construction services
var constructIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/5nzteaswg5wrjv8/construction.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for cycling ir bike stores
var cycleIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/fslqqmeutc66iuj/cycling.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for dance studios
var danceIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/yjznscr61cej2q4/dance_class.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for daycares
var daycareIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/yga17nezkk8d1qe/daycare.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for car dealerships
var dealerIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/rn7a216zrujmd1y/cardealer.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for dental services
var dentalIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/8oneqy9laactyqb/dentist.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for drycleaning services
var drycleanIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/2s5v9r5xsaiugba/dryclean.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for electrical services
var electricIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/u101n849y8dz4w2/electric.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for engineering and manufacturing services
var engIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/flmpkqn0ezp50lr/engineer.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for real estate services
var estateIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/5hcyhgls6z29sgq/realestate.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Farmer's Markets/Farms
var farmIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/12l1ctw2pxtljbl/farm.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});	

//Symbol for Fast food restaurants
var fastIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/4otlsjmyt2qnjd1/fastfood.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for financial services and banks
var financeIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/1xpauw6o0e1ie66/finance.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Fire Stations
var fireIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/4iczugvuzercsoq/fire.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Flower Stores
var flowerIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/befl6hszt0ib7g2/flower.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});	

//Symbol for Food Stores
var foodIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/8r8lwsypgsmn24b/restaurant.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});	

//Symbol for gas stations
var gasIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/75hu6x7uue5bp3i/gas.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for General Stores
var generalIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/pzj5u0op3vpvmt2/general.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Golf Courses and Stores
var golfIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/n65x5bglhucw03b/golf.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for grocery stores
var groceryIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/tvpkerryolvw54f/grocery.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Healthcare Services
var healIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/4egqqvaerpdw0by/heal.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for home decor stores
var homeIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/jkb9knsq1b22yit/home.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for home decor stores
var horseIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/zmxicf6ypb7e5l0/horse.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for hotels and inns
var hotelIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/vovlcde6ornwv3s/hotel.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Ice Cream Shops
var iceIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/s0l6jtim7yt3r43/icecream.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});	

//Symbol for insurance services
var insureIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/xihcy0tejsig3bc/insurance.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});	

//Symbol for Jewelry Stores
var jewelIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/43hetpygtr9620t/jewelry.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for legal services
var landscapeIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/ogz8lnxmwzc6ox7/landscape.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for legal services
var lawIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/h1ytn4ik99ly8en/law.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for post offices and mail services
var mailIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/933p8dd6m6fy7ti/mail.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for martial arts studios
var martialIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/flrta2e6n14aicw/martialarts.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Community Buildings, Schools and Churches
var municIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/hlkkp8tb5pieda1/municipal.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Music stores & lessons
var musicIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/28pfhrb2f8x7yd7/music.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Optometry Services
var optomIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/z3c6pub47sw5s30/optical.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for oil and gas Services
var oilIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/xmkwetumpy3kga7/oil.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Pet Stores
var petsIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/dssbn3z3i44c7e6/pets.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for pharmacies
var pharmIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/huy13ft0d0dphf1/pharmacy.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for photo studios and camera stores
var photoIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/em8pcedheqv0t3r/photo.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for physiotherapy clinics
var physioIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/edqxmv8p1fo6otu/physio.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Pizza Stores
var pizzaIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/amw2oc2c3go0xhe/pizza.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Indoor playground facilities
var playIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/iqw7kp18swd3a70/playground.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for pool services
var poolIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/db0cw1w4093tryx/pool.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Professional Services
var proIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/2ggz7y0kjwfo0u6/pro.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Convenience Stores
var quickIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/ma7rca59xdct9e7/quick.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Retail Services
var retailIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/0yo8aziwsfqi52v/retail.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for schools and educational services
var schoolIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/mwd23v42v26q7xu/school.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Senior Services
var seniorIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/auplurwg49niubq/senior.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Sewing and Alteration Stores
var sewIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/sbdvxk5xadq3rxs/sewing.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for soccer services
var soccerIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/2q0aawym39locb6/soccer.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for fitness centres and sports stores
var sportIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/8s1vr478sdn7a01/fitness.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Swimming Pools
var swimIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/hmmpe2uz7m992ln/swim.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for tennis services
var tennisIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/t6r0jgjajxjme5i/tennis.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Theatres
var theatreIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/1inaiimiptuq5j5/theater.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Trucking and transportation services
var transportIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/v3hjmyuteeicrxh/transport.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for travel agencies
var travelIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/2uhlmy9rnqm727d/travel.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Veterinary Services
var vetIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/vz9bguw0xfxz058/vet.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for nutrition stores
var vitaminIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/9htgj3unwccjdfw/vitamin.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Symbol for Car Washes
var washIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/h8edma0a9rb9uid/carwash.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});
	
//Symbol for Wine Shops
var wineIcon = L.icon({
	iconUrl: 'https://dl.dropbox.com/s/qejisz5us7h6e1h/wine.png?dl=0',
	iconSize: [36, 40],
	iconAnchor: [17, 35],
	popupAnchor: [0, -28]
});

//Customize geojson symbols and labels for the control widget layer group
mapstyle = {
	pointToLayer: function(feature, latlng) {
		//Marker and pop-up for aesthetic stores
		if (feature.properties.amenity == "Aes")
			return L.marker(latlng, {
				icon: aesIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
 
 		//Marker and pop-up for arenas and rinks
		if (feature.properties.amenity == "Arena")
			return L.marker(latlng, {
				icon: arenaIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for galleries and art stores
		if (feature.properties.amenity == "Art")
			return L.marker(latlng, {
				icon: artIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for bakers and bakeries
		if (feature.properties.amenity == "Bake")
			return L.marker(latlng, {
				icon: bakeIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for banks
		if (feature.properties.amenity == "Bank")
			return L.marker(latlng, {
				icon: bankIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for beer store and pubs
		if (feature.properties.amenity == "Beer")
			return L.marker(latlng, {
				icon: beerIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for Cafes
		if (feature.properties.amenity == "Cafe")
			return L.marker(latlng, {
				icon: cafeIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for Car Repair Services
		if (feature.properties.amenity == "Carrepair")
			return L.marker(latlng, {
				icon: carrepairIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for chiropractors
		if (feature.properties.amenity == "Chiro")
			return L.marker(latlng, {
				icon: chiroIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for churches
		if (feature.properties.amenity == "Church")
			return L.marker(latlng, {
				icon: churchIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for computer and software technology services
		if (feature.properties.amenity == "Comp")
			return L.marker(latlng, {
				tags: ['Franchise'],
				icon: compIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
			
		//Marker and pop-up for computer and software technology services
		if (feature.properties.amenity == "Construct")
			return L.marker(latlng, {
				icon: constructIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for cycling or bike stores
		if (feature.properties.amenity == "Cycle")
			return L.marker(latlng, {
				icon: cycleIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for dance studios
		if (feature.properties.amenity == "Dance")
			return L.marker(latlng, {
				icon: danceIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for daycare
		if (feature.properties.amenity == "Daycare")
			return L.marker(latlng, {
				icon: daycareIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for car dealerships
		if (feature.properties.amenity == "Dealer")
			return L.marker(latlng, {
				icon: dealerIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for dental services
		if (feature.properties.amenity == "Dental")
			return L.marker(latlng, {
				icon: dentalIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for dryclean services
		if (feature.properties.amenity == "Dryclean")
			return L.marker(latlng, {
				tags: ['Franchise'],
				icon: drycleanIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for electrical services
		if (feature.properties.amenity == "Electric")
			return L.marker(latlng, {
				icon: electricIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for engineering and manufacturing services
		if (feature.properties.amenity == "Eng")
			return L.marker(latlng, {
				icon: engIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for real estate services
		if (feature.properties.amenity == "Estate")
			return L.marker(latlng, {
				icon: estateIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for farms and the farmers market
		if (feature.properties.amenity == "Farm")
			return L.marker(latlng, {
				icon: farmIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for fast food restaurants
		if (feature.properties.amenity == "Fast")
			return L.marker(latlng, {
				icon: fastIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for financial services
		if (feature.properties.amenity == "Finance")
			return L.marker(latlng, {
				icon: financeIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for fire stations
		if (feature.properties.amenity == "Fire")
			return L.marker(latlng, {
				icon: fireIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for flower shops
		if (feature.properties.amenity == "Flower")
			return L.marker(latlng, {
				icon: flowerIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for gas stations
		if (feature.properties.amenity == "Gas")
			return L.marker(latlng, {
				icon: gasIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for general services
		if (feature.properties.amenity == "General")
			return L.marker(latlng, {
				icon: generalIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for golf services
		if (feature.properties.amenity == "Golf")
			return L.marker(latlng, {
				icon: golfIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for grocery stores
		if (feature.properties.amenity == "Grocery")
			return L.marker(latlng, {
				icon: groceryIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for general health services
		if (feature.properties.amenity == "Heal")
			return L.marker(latlng, {
				icon: healIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for home decor services
		if (feature.properties.amenity == "Home")
			return L.marker(latlng, {
				icon: homeIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for horseback riding and stable services
		if (feature.properties.amenity == "Horse")
			return L.marker(latlng, {
				icon: horseIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
			
		//Marker and pop-up for hotels and inns
		if (feature.properties.amenity == "Hotel")
			return L.marker(latlng, {
				icon: hotelIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
					
		//Marker and pop-up for ice cream shops
		if (feature.properties.amenity == "Ice")
			return L.marker(latlng, {
				icon: iceIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for insurance services
		if (feature.properties.amenity == "Insure")
			return L.marker(latlng, {
				icon: insureIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
			
		//Marker and pop-up for jewellery shops
		if (feature.properties.amenity == "Jewel")
			return L.marker(latlng, {
				icon: jewelIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for landscape services
		if (feature.properties.amenity == "Landscape")
			return L.marker(latlng, {
				icon: landscapeIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for legal services
		if (feature.properties.amenity == "Law")
			return L.marker(latlng, {
				icon: lawIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for post offices and mail services
		if (feature.properties.amenity == "Mail")
			return L.marker(latlng, {
				icon: mailIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for martial arts services
		if (feature.properties.amenity == "Martial")
			return L.marker(latlng, {
				icon: martialIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for municipal services
		if (feature.properties.amenity == "Munic")
			return L.marker(latlng, {
				icon: municIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for music services
		if (feature.properties.amenity == "Music")
			return L.marker(latlng, {
				icon: musicIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	
			
		//Marker and pop-up for oil and natural gas services
		if (feature.properties.amenity == "Oil")
			return L.marker(latlng, {
				icon: oilIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for optometry services
		if (feature.properties.amenity == "Optom")
			return L.marker(latlng, {
				icon: optomIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	
		
		//Marker and pop-up for pet stores
		if (feature.properties.amenity == "Pets")
			return L.marker(latlng, {
				icon: petsIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for pharmacies
		if (feature.properties.amenity == "Pharm")
			return L.marker(latlng, {
				icon: pharmIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for photo studios and camera stores
		if (feature.properties.amenity == "Photo")
			return L.marker(latlng, {
				icon: photoIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for physiotherapy clinics
		if (feature.properties.amenity == "Physio")
			return L.marker(latlng, {
				icon: physioIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for pizza shops
		if (feature.properties.amenity == "Pizza")
			return L.marker(latlng, {
				icon: pizzaIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for indoor playgrounds
		if (feature.properties.amenity == "Play")
			return L.marker(latlng, {
				icon: playIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for pool services
		if (feature.properties.amenity == "Pool")
			return L.marker(latlng, {
				icon: poolIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for professional services
		if (feature.properties.amenity == "Pro")
			return L.marker(latlng, {
				icon: proIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
			
		//Marker and pop-up for convenience stores
		if (feature.properties.amenity == "Quick")
			return L.marker(latlng, {
				icon: quickIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for restaurants
		if (feature.properties.amenity == "Rest")
			return L.marker(latlng, {
				icon: foodIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for retail stores
		if (feature.properties.amenity == "Retail")
			return L.marker(latlng, {
				icon: retailIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for schools and educational services
		if (feature.properties.amenity == "School")
			return L.marker(latlng, {
				icon: schoolIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for senior homes and retirement centres
		if (feature.properties.amenity == "Senior")
			return L.marker(latlng, {
				icon: seniorIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for fabric stores and alterations
		if (feature.properties.amenity == "Sew")
			return L.marker(latlng, {
				icon: sewIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for clothing stores
		if (feature.properties.amenity == "Shop")
			return L.marker(latlng, {
				icon: clothingIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for soccer services
		if (feature.properties.amenity == "Soccer")
			return L.marker(latlng, {
				icon: soccerIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for sporting stores, ballparks, etc.
		if (feature.properties.amenity == "Sport")
			return L.marker(latlng, {
				icon: sportIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
		
		//Marker and pop-up for swimming pools and aquatic centres
		if (feature.properties.amenity == "Swim")
			return L.marker(latlng, {
				icon: swimIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for tennis services
		if (feature.properties.amenity == "Tennis")
			return L.marker(latlng, {
				icon: tennisIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for theatres
		if (feature.properties.amenity == "Theatre")
			return L.marker(latlng, {
				icon: theatreIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	
		
		//Marker and pop-up for trucking and transportation services
		if (feature.properties.amenity == "Transport")
			return L.marker(latlng, {
				icon: transportIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);
			
		//Marker and pop-up for trucking and transportation services
		if (feature.properties.amenity == "Travel")
			return L.marker(latlng, {
				icon: travelIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for veterinary services
		if (feature.properties.amenity == "Vet")
			return L.marker(latlng, {
				icon: vetIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for nutrition stores
		if (feature.properties.amenity == "Vitamin")
			return L.marker(latlng, {
				icon: vitaminIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);	

		//Marker and pop-up for car wash stations
		if (feature.properties.amenity == "Wash")
			return L.marker(latlng, {
				icon: washIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);

		//Marker and pop-up for wine shops
		if (feature.properties.amenity == "Wine")
			return L.marker(latlng, {
				icon: wineIcon}).bindPopup('<b>'+feature.properties.name+'</b>'+'<br><br>'+'Address: '+feature.properties.address+'<br><br>'
			+'Phone: '+feature.properties.phone+'<br><br>' + feature.properties.url);		
		}
	};

	var mbAttr = 'KPF &copy 2016 | ' +
				 'Basemaps & Imagery Provided By: <a href="http://mapbox.com">Mapbox</a> and <a href="http://google.com">Google</a>',
	    mbUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw';

	var grayscale = L.tileLayer(mbUrl, {maxZoom: 20, id: 'mapbox.light', attribution: mbAttr}),
	    streets = L.tileLayer(mbUrl, {maxZoom: 20, id: 'mapbox.streets', attribution: mbAttr}),
	    comic = L.tileLayer(mbUrl, {maxZoom: 20, id: 'mapbox.comic', attribution: mbAttr});
		
	var googleSat = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
	    maxZoom: 20,
	    subdomains:['mt0','mt1','mt2','mt3']
	});
		
	//Create map
	var map = L.map('map', {
		center: [43.217779, -79.987283],
		zoom: 13,
		condensedAttributionControl: false,
		layers: [streets]
	});
	
	// set custom emblem and prefix
        L.control.condensedAttribution({
      		emblem: '&nbsp&nbsp&nbsp&nbsp&nbsp<div class="emblem-wrap"><img src="https://dl.dropbox.com/s/wfb75jezonbwgi2/info.png?dl=0"/></div>',
      		prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'
        }).addTo(map);
	
	//Cluster and Layer Creation - create cluster group, customize cluster icon, create layer with custom marker icons, add layer to cluster group
	//Group 1
	//Aesthetic Businesses
	var aesclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'aescluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var aeslyr = L.geoJson(aes, mapstyle);        
    aesclus.addLayer(aeslyr);
    		
	//Clothing and Textile Businesses
	var clothingclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'clothingcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
		        }
		        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
		    }
		});
        var clothinglyr = L.geoJson(clothing, mapstyle)        
        clothingclus.addLayer(clothinglyr);
   
   		//Design and Home Decor Businesses
	var designclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'designcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var designlyr = L.geoJson(design, mapstyle)        
    designclus.addLayer(designlyr);
    
    //Retail Businesses
 	var retailclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'retailcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var retaillyr = L.geoJson(retail, mapstyle)        
    retailclus.addLayer(retaillyr);  
    
	//Group 2
	//Art and Music Businesses
 	var artmusicclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'artmusiccluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var artmusiclyr = L.geoJson(artmusic, mapstyle)        
    artmusicclus.addLayer(artmusiclyr);
    
    //Theatre and Entertainment Businesses
    var theatreclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'theatrecluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var theatrelyr = L.geoJson(theatre, mapstyle)        
    theatreclus.addLayer(theatrelyr);
    
    //Group 3
	//Fitness and Nutrition Businesses
    var fitnessclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'fitnesscluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var fitnesslyr = L.geoJson(fitness, mapstyle)        
    fitnessclus.addLayer(fitnesslyr);
    
    //Sport Academies and Sporting Businesses
    var sportclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'sportcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var sportlyr = L.geoJson(sport, mapstyle)        
    sportclus.addLayer(sportlyr);
    
    //Group 4
    //Churches and Religious Services
    var churchclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'churchcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var churchlyr = L.geoJson(church, mapstyle)        
    churchclus.addLayer(churchlyr);
    
    //Schools and Educational Services
    var educationclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'educationcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var educationlyr = L.geoJson(education, mapstyle)        
    educationclus.addLayer(educationlyr);
    
    //Municipal Services
    var municipalclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'municipalcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var municipallyr = L.geoJson(municipal, mapstyle)        
    municipalclus.addLayer(municipallyr);
    
    //Farmers Markets and Grocery Stores
    var groceryclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'grocerycluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var grocerylyr = L.geoJson(grocery, mapstyle)        
    groceryclus.addLayer(grocerylyr);
    
    //Restaurants and Lodging Services
    var restclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'restcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var restlyr = L.geoJson(rest, mapstyle)        
    restclus.addLayer(restlyr);
    
    //Specialty Food Services
    var specrestclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'specrestcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var specrestlyr = L.geoJson(specrest, mapstyle)        
    specrestclus.addLayer(specrestlyr);
    
    //Group 6
    //Automotive and Gas Services
    var autogasclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'autogascluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var autogaslyr = L.geoJson(autogas, mapstyle)        
    autogasclus.addLayer(autogaslyr);
    
    //Manufacturing and Engineering Services
    var manuengclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'manuengcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var manuenglyr = L.geoJson(manueng, mapstyle)        
    manuengclus.addLayer(manuenglyr);
    
    //Landscaping and Home Maintenance Services
    var landmainclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'landmaincluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var landmainlyr = L.geoJson(landmain, mapstyle)        
    landmainclus.addLayer(landmainlyr);
    
    //Extra General Services or Specialty Services
    var generalclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'generalcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var generallyr = L.geoJson(general, mapstyle)        
    generalclus.addLayer(generallyr);
    
    //Science and Computer Services
    var techclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'techcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var techlyr = L.geoJson(tech, mapstyle)        
    techclus.addLayer(techlyr);
    
    //Utility and Construction Services
    var utilityclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'utilitycluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var utilitylyr = L.geoJson(utility, mapstyle)        
    utilityclus.addLayer(utilitylyr);
    
    //Group 7
    //Chiropractic and Physio Services
    var chirophyclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'chirophycluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var chirophylyr = L.geoJson(chirophy, mapstyle)        
    chirophyclus.addLayer(chirophylyr);
    
    //Dental and Optical Services
    var denopclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'denopcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var denoplyr = L.geoJson(denop, mapstyle)        
    denopclus.addLayer(denoplyr);
    
    //Physicians and Pharmacies
    var pharmphyclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'pharmphycluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var pharmphylyr = L.geoJson(pharmphy, mapstyle)        
    pharmphyclus.addLayer(pharmphylyr);
    
    //Specialty Health Services
    var spechealclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'spechealcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var specheallyr = L.geoJson(specheal, mapstyle)        
    spechealclus.addLayer(specheallyr);
    
    //Veterinary and Pet Services
    var vetclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'vetcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var vetlyr = L.geoJson(vet, mapstyle)        
    vetclus.addLayer(vetlyr);
    
    //Group 8
	//Advisory and Consulting Businesses
    var adviseclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'procluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var adviselyr = L.geoJson(advise, mapstyle)        
    adviseclus.addLayer(adviselyr);
    
  	//Financial and Legal Services
    var financelawclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'financelawcluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var financelawlyr = L.geoJson(financelaw, mapstyle)        
    financelawclus.addLayer(financelawlyr);
    
    //Insurance and Real Estate Services
    var insurestateclus = new L.MarkerClusterGroup({
	    iconCreateFunction: function (cluster) {
	        var childCount = cluster.getChildCount();
	        var c = 'insurestatecluster-';
	        if (childCount < 10) {
	            c += 'small';
	        } else if (childCount < 20) {
	            c += 'medium';
	        } else {
	            c += 'large';
	        }
	        return new L.DivIcon({ html: childCount, className: c, iconSize: null });
	    }
	});
    var insurestatelyr = L.geoJson(insurestate, mapstyle)        
    insurestateclus.addLayer(insurestatelyr);

	var baseMaps = [
			       	 { 
						groupName: "<b>Base Maps</b>",
						expanded: false,
						layers: {
						"Streets":  streets,
						"Satellite Imagery": googleSat,
						"Comic-Style": comic
						}
				    }							
				];
					
	var overlays = [
				    {
						groupName : "Aesthetic, Design, & Retail Services",
						expanded : false,
						layers    : { 
						"Aesthetics & Spas": aesclus,
						"Fashion & Textiles": clothingclus,
						"Design & Home Decor": designclus,
						"Specialty Retail Services": retailclus,
			     	  }	
                  },{
						groupName : "Arts & Entertainment",
						expanded : false,
						layers    : { 
						"Arts & Music": artmusicclus,
						"Theatre & Entertainment": theatreclus,
					  }	
                  },{
						groupName : "Athletics & Fitness",
						expanded : false,
						layers    : { 
						"Fitness Centres & Nutrition Stores": fitnessclus,
						"Sport Academies & Stores": sportclus		
						   }	
                  },{
						groupName : "Churches, Schools, & Municipal Services",
						expanded : false,
						layers    : { 
						"Churches & Religious Centres": churchclus,
						"Schools & Educational Services": educationclus,
						"Community & Municipal Services": municipalclus
					  }	
                  },{
						groupName : "Food & Drink Services",
						expanded : false,
						layers    : { 
						"Grocery Stores & Farmer's Markets": groceryclus,
						"Restaurants & Lodges": restclus,
						"Specialty Food Services": specrestclus	
					   }	
                  },{
						groupName : "General Services",
						expanded : false,
						layers    : {
						"Automotive & Gas Services": autogasclus,
						"Engineering & Manufacturing Services": manuengclus,
						"Landscaping & Home Maintenance Services": landmainclus,
						"Specialty Services": generalclus,
						"Science & Computer Services": techclus,
						"Utility & Construction Services": utilityclus
					   }	
                  },{
						groupName : "Health Services",
						expanded : false,
						layers    : { 
					    "Chiropractic & Physiotherapy Services": chirophyclus,
						"Dental & Optical Services": denopclus,	
						"Physicians & Pharmacies": pharmphyclus,
						"Specialty Health Services": spechealclus,
						"Veterinary & Pet Services": vetclus,
					   }	
                  },{
						groupName : "Professional Services",
						expanded : false,
						layers    : { 
						"Advisory & Consulting Services": adviseclus,
						"Financial & Legal Services": financelawclus,
						"Insurance & Real Estate Services": insurestateclus,
					   }	
                  }							 
			];
	
	//Options/setting needed for the styled layer control widget	
	var options = {
		autoResize: true,
		group_maxHeight: "200px",
		//container_maxHeight : "350px", 
		exclusive: false,
		collapsed: true, 
		position: 'topright'
	};

	//Create styled layer control widget
	var control = L.Control.styledLayerControl(baseMaps, overlays, options);
	map.addControl(control);

	//Allows for the user to scroll through the layer control on mobile devices
	if (!L.Browser.touch) {
	  L.DomEvent
	  .disableClickPropagation(control._container)
	  .disableScrollPropagation(control._container);
	} else {
	  L.DomEvent.disableClickPropagation(control._container);
	}	

	//Customize geojson symbols and labels for the search widget layer group
	//Features are set to transparent because of the conflicting layer groups
	searchstyle = {
		pointToLayer: function(feature, latlng) {
			return L.marker(latlng, {
				icon: L.divIcon({iconSize: L.point(6, 6),
				})
			})
		}
	};
	
	// Create layer group for the search widget, insert style settings
	var poiLayers = L.layerGroup([
		L.geoJson(artmusic, searchstyle),
		L.geoJson(theatre, searchstyle),
		L.geoJson(church, searchstyle),
		L.geoJson(education, searchstyle),
		L.geoJson(municipal, searchstyle),
		L.geoJson(fitness, searchstyle),
		L.geoJson(sport, searchstyle),
		L.geoJson(grocery, searchstyle),
		L.geoJson(rest, searchstyle),
		L.geoJson(specrest, searchstyle),
		L.geoJson(chirophy, searchstyle),
		L.geoJson(denop, searchstyle),
		L.geoJson(pharmphy, searchstyle),
		L.geoJson(specheal, searchstyle),
		L.geoJson(vet, searchstyle),
		L.geoJson(advise, searchstyle),
		L.geoJson(financelaw, searchstyle),
		L.geoJson(insurestate, searchstyle),
		L.geoJson(aes, searchstyle),
		L.geoJson(clothing, searchstyle),
		L.geoJson(design, searchstyle),
		L.geoJson(retail, searchstyle),
		L.geoJson(autogas, searchstyle),
		L.geoJson(manueng, searchstyle),
		L.geoJson(landmain, searchstyle),
		L.geoJson(tech, searchstyle),
		L.geoJson(utility, searchstyle),
		L.geoJson(general, searchstyle),
	]);

	//Create search widget wth layer group and add it to the map
	L.control.search({
		layer: poiLayers,
		initial: false,
		propertyName: 'name'
	}).addTo(map);
	
	//Layers are removed from map to improve functionality (speed) on mobile devices
	map.removeLayer(poiLayers);
	
	//Add Ancaster Village Logo to Map
    var logo = L.control({position: 'bottomleft'});
    logo.onAdd = function(map){
        var div = L.DomUtil.create('div', 'myclass');
        div.innerHTML= "<img id='logo' src='http://www.shopancasterfarmersmarket.com/bia-dev/wp-content/uploads/2015/08/logo-enclosed.png'/>";
        return div;
    }
    logo.addTo(map);		
  </script>
</body>
</html>
